<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Task 008 – Frame-Based Rotation Control</title>
  <link rel="stylesheet" href="shared.css">
</head>
<body>
<main>
  <header>
    <h1>Task 008 – Frame-Based Rotation</h1>
    <p class="lead">Use a frame counter for deterministic rotation; pause/resume with SPACE.</p>
  </header>
  <section>
    <h2>Approach</h2>
    <ul>
      <li>Maintain a frame counter (e.g., <code>debugFrames</code>), increment only when not paused.</li>
      <li>Angle = frameCount * degreesPerFrame (e.g., 0.75° per frame → 45°/s at 60 fps).</li>
      <li>Use in <code>updateUniformBuffer</code> to build the model matrix.</li>
      <li>SPACE toggles pause: do not increment frame counter when paused, so orientation holds.</li>
    </ul>
  </section>
  <section>
    <h2>Example snippet</h2>
<pre><code class="language-go">elapsed := float32(a.debugFrames)
degPerFrame := 45.0 / 60.0
spinZ := elapsed * mgl32.DegToRad(float32(degPerFrame))
model := mgl32.HomogRotate3D(spinZ, mgl32.Vec3{0,0,1})
// increment debugFrames only if !paused
</code></pre>
    <p>Pause toggle:</p>
<pre><code class="language-go">func (a *VulkanApp) togglePause() {
  if a.paused { a.paused = false; return }
  a.paused = true
}</code></pre>
    <p>Increment in draw loop:</p>
<pre><code class="language-go">if !a.paused { a.debugFrames++ }</code></pre>
  </section>
  <section>
    <h2>Why frame-based rotation?</h2>
    <p>Coupling rotation to frames (not time) guarantees deterministic orientation for screenshots and comparisons to vkcube. If your GPU is faster, the cube spins faster; to smooth it, scale <code>degPerFrame</code> down until it visually matches vkcube on your machine.</p>
    <p>For very high FPS, combine frame count with a divisor:</p>
<pre><code class="language-go">degPerFrame := 45.0 / 120.0 // slower spin
spinY := float32(a.debugFrames) * mgl32.DegToRad(degPerFrame)
model := mgl32.HomogRotate3DY(spinY)</code></pre>
    <p>Because the frame counter is integral, pausing simply stops increments; resuming continues smoothly from the same angle.</p>
  </section>
  <div class="nav"><a href="index.html">← Back to Hub</a> <a href="step-009-fps-overlay.html">Next →</a></div>
</main>
</body>
</html>
