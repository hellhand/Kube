<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Task 004 – Graphics Pipeline Milestone</title>
  <link rel="stylesheet" href="shared.css">
</head>
<body>
<main>
  <header>
    <h1>Task 004 – Graphics Pipeline & Resources</h1>
    <p class="lead">Compile shaders, define descriptor layout, and build a pipeline ready to draw the cube.</p>
  </header>
  <section>
    <div class="badge">Milestone goal</div>
    <p>Have SPIR-V shaders, descriptor set layout, pipeline layout, and a graphics pipeline bound to the swapchain render pass.</p>
  </section>
  <section>
    <h2>Code sketch</h2>
<pre><code class="language-go">// descriptor set layout: binding0 UBO, binding1 sampler
// load vert.spv / frag.spv -> shader modules
// vertex input: pos/color/uv
// raster: cull NONE, depth ON
// pipeline layout referencing descriptor set layout
// graphics pipeline using swapchain render pass, subpass 0
</code></pre>
  </section>
  <section>
    <h2>Key steps</h2>
    <ul>
      <li>Write GLSL for vertex/fragment; compile with <code>glslc</code> to SPIR-V.</li>
      <li>Descriptor set layout: binding 0 (UBO), binding 1 (combined image sampler).</li>
      <li>Pipeline state: vertex input (pos/color/uv), triangle list, viewport/scissor = swapchain extent, cull OFF, depth ON, blend OFF.</li>
    </ul>
  </section>
  <section>
    <h2>What success looks like</h2>
    <p>After this milestone, you should be able to record command buffers that bind the pipeline and draw indexed geometry without validation errors. The output is still a solid color until we add vertex data in the next step.</p>
<pre><code class="language-go">vulkan.CmdBindPipeline(cmd, vulkan.PipelineBindPointGraphics, a.graphicsPipeline)
vulkan.CmdBindDescriptorSets(cmd, vulkan.PipelineBindPointGraphics, a.pipelineLayout, 0,
  []vulkan.DescriptorSet{a.descriptorSets[imgIndex]}, nil)
vulkan.CmdBindVertexBuffers(cmd, 0, 1, []vulkan.Buffer{a.vertexBuffer}, []vulkan.DeviceSize{0})
vulkan.CmdBindIndexBuffer(cmd, a.indexBuffer, 0, vulkan.IndexTypeUint32)
vulkan.CmdDrawIndexed(cmd, uint32(len(cubeIndices)), 1, 0, 0, 0)</code></pre>
    <p>If the command above records and submits without triggering validation, the pipeline wiring is correct and you are ready for geometry and textures.</p>
  </section>
  <div class="nav"><a href="index.html">← Back to Hub</a> <a href="step-004-01-shaders-pipeline.html">Next →</a></div>
</main>
</body>
</html>
