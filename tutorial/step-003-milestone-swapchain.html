<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Task 003 – Swapchain & Frame Scheduling Milestone</title>
  <link rel="stylesheet" href="shared.css">
</head>
<body>
<main>
  <header>
    <h1>Task 003 – Swapchain & Frame Scheduling</h1>
    <p class="lead">Create the swapchain, views, depth buffer, render pass, framebuffers, command buffers, and per-frame sync.</p>
  </header>
  <section>
    <div class="badge">Milestone goal</div>
    <p>Render a clear-color loop that acquires, draws, and presents without validation errors.</p>
  </section>
  <section>
    <h2>Code sketch</h2>
<pre><code class="language-go">// create swapchain (format, present mode, extent)
// create swapchain image views
// create depth image/view
// create render pass (color+depth)
// create framebuffers
// create command pool + buffers
// create per-frame semaphores/fences
// draw loop: acquire -> record (clear) -> submit -> present</code></pre>
  </section>
  <section>
    <h2>Key steps</h2>
    <ul>
      <li>Swapchain creation (formats, present mode, extent) with graceful handling of zero extent.</li>
      <li>Image views for each swapchain image.</li>
      <li>Depth image/view (device-local memory).</li>
      <li>Render pass with color + depth attachments.</li>
      <li>Framebuffers per swapchain image.</li>
      <li>Command pool and primary command buffers.</li>
      <li>Per-frame semaphores and fences for acquire/submit/present.</li>
    </ul>
  </section>
  <section>
    <h2>Validation-friendly run checklist</h2>
    <p>Use this to confirm the milestone:</p>
    <ol>
      <li>Run <code>go run .</code> and ensure the window clears to the configured color (green later) with no validation errors.</li>
      <li>Look for logs: <em>“validation layers not available; continuing without them”</em> is acceptable; anything else should be fixed before proceeding.</li>
      <li>Resize the window—swapchain recreation should happen automatically without flicker or crashes.</li>
      <li>Quit with ESC and confirm resources are destroyed (no lingering validation messages after exit).</li>
    </ol>
<pre><code class="language-go">// Minimal render loop skeleton after this milestone
for !a.window.ShouldClose() {
  a.drawFrame() // acquires, records clear, submits, presents
}
vulkan.DeviceWaitIdle(a.device)</code></pre>
    <p>If any of these steps fail, revisit swapchain formats, depth creation, and sync wiring before adding the pipeline in the next milestone.</p>
  </section>
  <div class="nav"><a href="index.html">← Back to Hub</a> <a href="step-003-01-swapchain-depth.html">Next →</a></div>
</main>
</body>
</html>
